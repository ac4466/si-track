{"version":3,"sources":["Layout.tsx","tracker/Initializer.tsx","tracker/modules/Fear.tsx","tracker/Tracker.tsx","App.tsx","index.tsx"],"names":["TrackerState","Wrapper","styled","div","Header","Body","Content","globalTrackerState","atom","key","default","UNINITIALIZED","Layout","children","trackerState","useRecoilValue","VICTORY","numberOfPieces","tweenDuration","initialVelocityY","min","max","Title","level","style","textAlign","color","margin","playerCountState","Initializer","useRecoilState","setTrackerState","playerCount","setPlayerCount","title","visible","centered","closable","footer","type","onClick","IN_PROGRESS","Group","display","justifyContent","defaultValue","String","size","onChange","event","Number","target","value","Button","Typography","Dot","span","props","filled","TerrorLevel","levels","i","push","alignItems","Fear","totalFear","useState","fearPool","setFearPool","generatedFear","setGeneratedFear","terrorLevel","setTerrorLevel","useSetRecoilState","horn","useMemo","Audio","process","useEffect","t","play","flexFlow","danger","shape","icon","RollbackOutlined","disabled","RightOutlined","Tracker","App","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.4b4800ee.chunk.js","sourcesContent":["import { Typography } from \"antd\";\nimport React from \"react\";\nimport Confetti from \"react-confetti\";\nimport { atom, useRecoilValue } from \"recoil\";\nimport styled from \"styled-components\";\n\nconst Wrapper = styled.div`\n  display: flex;\n  flex-flow: column;\n  height: 100vh;\n`;\n\nconst Header = styled.div`\n  flex: 0 1 auto;\n  background: #1890ff;\n  padding: 10px;\n`;\n\nconst Body = styled.div`\n  display: flex;\n  justify-content: center;\n  background: LightYellow;\n  flex: 1 1 auto;\n  padding: 50px;\n`;\n\nconst Content = styled.div`\n  flex: 1 1 auto;\n  background: white;\n  max-width: 1000px;\n  overflow: auto;\n`;\n\nexport enum TrackerState {\n  UNINITIALIZED,\n  IN_PROGRESS,\n  VICTORY,\n}\n\nexport const globalTrackerState = atom<TrackerState>({\n  key: \"trackerState\",\n  default: TrackerState.UNINITIALIZED,\n});\n\nconst Layout: React.FC<unknown> = ({ children }) => {\n  const trackerState = useRecoilValue(globalTrackerState);\n\n  return (\n    <>\n      {trackerState === TrackerState.VICTORY && (\n        <Confetti\n          numberOfPieces={500}\n          tweenDuration={30000}\n          initialVelocityY={{ min: 5, max: 5 }}\n        />\n      )}\n      <Wrapper>\n        <Header>\n          <Typography.Title\n            level={2}\n            style={{ textAlign: \"center\", color: \"white\", margin: \"0\" }}\n          >\n            Spirit Island Tracker\n          </Typography.Title>\n        </Header>\n        <Body>\n          <Content>{children}</Content>\n        </Body>\n      </Wrapper>\n    </>\n  );\n};\n\nexport default Layout;\n","import { Button, Modal, Radio } from \"antd\";\nimport React from \"react\";\nimport { atom, useRecoilState } from \"recoil\";\nimport { globalTrackerState, TrackerState } from \"../Layout\";\n\nexport const playerCountState = atom<number>({\n  key: \"playerCount\",\n  default: 2,\n});\n\nconst Initializer: React.FC<unknown> = () => {\n  const [trackerState, setTrackerState] = useRecoilState(globalTrackerState);\n  const [playerCount, setPlayerCount] = useRecoilState(playerCountState);\n\n  return (\n    <Modal\n      title={\"Number of Players\"}\n      visible={trackerState === TrackerState.UNINITIALIZED}\n      centered={true}\n      closable={false}\n      footer={\n        <Button\n          type=\"primary\"\n          onClick={() => {\n            setTrackerState(TrackerState.IN_PROGRESS);\n          }}\n        >\n          Start\n        </Button>\n      }\n    >\n      <Radio.Group\n        style={{ display: \"flex\", justifyContent: \"center\" }}\n        defaultValue={String(playerCount)}\n        size=\"large\"\n        onChange={(event) => {\n          setPlayerCount(Number(event.target.value));\n        }}\n      >\n        <Radio.Button value=\"2\">2</Radio.Button>\n        <Radio.Button value=\"3\">3</Radio.Button>\n        <Radio.Button value=\"4\">4</Radio.Button>\n      </Radio.Group>\n    </Modal>\n  );\n};\n\nexport default Initializer;\n","import { RightOutlined, RollbackOutlined } from \"@ant-design/icons\";\nimport { Button, Card, Col, Row, Typography } from \"antd\";\nimport React, { ReactNode, useEffect, useMemo, useState } from \"react\";\nimport { useRecoilValue, useSetRecoilState } from \"recoil\";\nimport styled from \"styled-components\";\nimport { globalTrackerState, TrackerState } from \"../../Layout\";\nimport { playerCountState } from \"../Initializer\";\n\nconst { Title } = Typography;\n\nconst FEAR_PER_PLAYER = 4;\n\nconst Dot = styled.span`\n  margin-right: 8px;\n  width: 13px;\n  height: 13px;\n  border-radius: 50%;\n  background: ${(props) => (props.filled ? \"firebrick\" : \"lightgray\")};\n`;\n\nconst TerrorLevel: React.FC<{ level: number }> = ({ level }) => {\n  const levels: ReactNode[] = [];\n\n  for (let i = 0; i < 10; i++) {\n    if (i % 3 === 0) {\n      levels.push(\n        <Title\n          key={i}\n          level={3}\n          style={{\n            margin: i < 9 ? \"0px 8px 0px 0px\" : \"0px\",\n            color: level >= i ? \"firebrick\" : \"lightgray\",\n          }}\n        >\n          {i < 9 ? i / 3 + 1 : \"W\"}\n        </Title>\n      );\n    } else {\n      levels.push(<Dot key={i} filled={level >= i} />);\n    }\n  }\n\n  return (\n    <div\n      style={{\n        display: \"flex\",\n        justifyContent: \"center\",\n        alignItems: \"center\",\n      }}\n    >\n      <Title level={3} style={{ margin: \"0px 8px 0px 0px\" }}>\n        Terror Level:\n      </Title>\n      {levels}\n    </div>\n  );\n};\n\nconst Fear: React.FC<unknown> = () => {\n  const playerCount = useRecoilValue(playerCountState);\n  const totalFear = playerCount * FEAR_PER_PLAYER;\n\n  const [fearPool, setFearPool] = useState<number>(totalFear);\n  const [generatedFear, setGeneratedFear] = useState<number>(0);\n  const [terrorLevel, setTerrorLevel] = useState<number>(0);\n  const setTrackerState = useSetRecoilState(globalTrackerState);\n\n  const horn = useMemo(\n    () => new Audio(`${process.env.PUBLIC_URL}/horn.mp3`),\n    []\n  );\n\n  useEffect(() => {\n    if (!fearPool) {\n      setTerrorLevel((t) => t + 1);\n    }\n  }, [fearPool, setTerrorLevel]);\n\n  useEffect(() => {\n    if (terrorLevel === 9) {\n      horn.play();\n      setTrackerState(TrackerState.VICTORY);\n    }\n  }, [horn, terrorLevel, setTrackerState]);\n\n  const reset = () => {\n    setFearPool(totalFear);\n    setGeneratedFear(0);\n  };\n\n  const increment = () => {\n    setFearPool(fearPool - 1);\n    setGeneratedFear(generatedFear + 1);\n  };\n\n  return (\n    <Card title={<TerrorLevel level={terrorLevel} />}>\n      <Row>\n        <Col\n          span={9}\n          style={{ display: \"flex\", flexFlow: \"column\", alignItems: \"center\" }}\n        >\n          <Title level={4}>Fear Pool</Title>\n          <Title level={1} style={{ margin: \"0px\" }}>\n            {fearPool}\n          </Title>\n        </Col>\n        <Col\n          span={6}\n          style={{\n            display: \"flex\",\n            flexFlow: \"column\",\n            justifyContent: \"space-between\",\n            alignItems: \"center\",\n          }}\n        >\n          <Button\n            danger\n            shape=\"circle\"\n            icon={<RollbackOutlined />}\n            onClick={reset}\n            disabled={!!fearPool || terrorLevel === 9}\n            style={{ display: \"block\" }}\n          />\n          <Button\n            type=\"primary\"\n            size=\"large\"\n            shape=\"circle\"\n            icon={<RightOutlined />}\n            onClick={increment}\n            disabled={!fearPool || terrorLevel === 9}\n            style={{ display: \"block\" }}\n          />\n        </Col>\n        <Col\n          span={9}\n          style={{ display: \"flex\", flexFlow: \"column\", alignItems: \"center\" }}\n        >\n          <Title level={4}>Generated Fear</Title>\n          <Title level={1} style={{ margin: \"0px\" }}>\n            {generatedFear}\n          </Title>\n        </Col>\n      </Row>\n    </Card>\n  );\n};\n\nexport default Fear;\n","import { Col, Row } from \"antd\";\nimport React from \"react\";\nimport { useRecoilValue } from \"recoil\";\nimport { globalTrackerState, TrackerState } from \"../Layout\";\nimport Fear from \"./modules/Fear\";\n\nconst Tracker: React.FC = () => {\n  const trackerState = useRecoilValue(globalTrackerState);\n\n  if (trackerState === TrackerState.UNINITIALIZED) {\n    return null;\n  }\n\n  return (\n    <>\n      <Row>\n        <Col span={12}>\n          <Fear />\n        </Col>\n        <Col span={12}></Col>\n      </Row>\n    </>\n  );\n};\n\nexport default Tracker;\n","import React from \"react\";\nimport { RecoilRoot } from \"recoil\";\nimport Layout from \"./Layout\";\nimport Initializer from \"./tracker/Initializer\";\nimport Tracker from \"./tracker/Tracker\";\n\nconst App: React.FC = () => {\n  return (\n    <RecoilRoot>\n      <Layout>\n        <Initializer />\n        <Tracker />\n      </Layout>\n    </RecoilRoot>\n  );\n};\n\nexport default App;\n","import \"antd/dist/antd.css\";\nimport React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport App from \"./App\";\n\nReactDOM.render(<App />, document.getElementById(\"root\"));\n"],"sourceRoot":""}